<h1>Publications</h1>
<ng-container *ngIf="isCurator$ | async">
  <div class="new-button-container">
    <button mat-raised-button [routerLink]="['/publications/new']">
      <mat-icon>add</mat-icon> New Publication
    </button>
  </div>
</ng-container>
<mat-form-field appearance="outline">
  <mat-label>Filter</mat-label>
  <input matInput (keyup)="applyFilterTarget($event.target)" placeholder="Filter"/>
</mat-form-field>
<mat-table [dataSource]="publications" matSort>
  <ng-container matColumnDef="pubKey">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> PubKey</th>
    <td mat-cell *matCellDef="let row">
      <a [routerLink]="['/publications', row.pubKey]">{{ row.pubKey }}</a>
    </td>
  </ng-container>
  <ng-container matColumnDef="title">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Title</th>
    <td mat-cell *matCellDef="let row"> {{ row.title }}</td>
  </ng-container>
  <ng-container matColumnDef="authors">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Authors</th>
    <td mat-cell *matCellDef="let row"> {{ row.authors }}</td>
  </ng-container>
  <ng-container matColumnDef="year">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Year</th>
    <td mat-cell *matCellDef="let row"> {{ row.year }}</td>
  </ng-container>
  <ng-container matColumnDef="citation">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Citation</th>
    <td mat-cell *matCellDef="let row"> {{ row.citation }}</td>
  </ng-container>
  <ng-container matColumnDef="pubmedid">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> PMID</th>
    <td mat-cell *matCellDef="let row"> <a href="https://pubmed.ncbi.nlm.nih.gov/{{row.pubmedid}}/">{{ row.pubmedid }}</a></td>
  </ng-container>
  <ng-container matColumnDef="doi">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> DOI</th>
    <td mat-cell *matCellDef="let row"> {{ row.doi }}</td>
  </ng-container>
<!--  <ng-container matColumnDef="endnoteid">-->
<!--    <th mat-header-cell *matHeaderCellDef mat-sort-header> Endnote ID</th>-->
<!--    <td mat-cell *matCellDef="let row"> {{ row.endnoteid }}</td>-->
<!--  </ng-container>-->
  <ng-container matColumnDef="url">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> URL</th>
    <td mat-cell *matCellDef="let row"> {{ row.url }}</td>
  </ng-container>
<!--  <ng-container matColumnDef="wittid">-->
<!--    <th mat-header-cell *matHeaderCellDef mat-sort-header> Witt ID</th>-->
<!--    <td mat-cell *matCellDef="let row"> {{ row.wittid }}</td>-->
<!--  </ng-container>-->
  <ng-container matColumnDef="biomodelRefs">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Biomodels</th>
    <td mat-cell *matCellDef="let row">
      <a *ngFor="let ref of row.biomodelRefs"
         href="/api/v0/biomodel/{{ref.bmKey}}">
        {{ ref.bmKey }}
      </a>
    </td>
  </ng-container>
  <ng-container matColumnDef="mathmodelRefs">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Mathmodels</th>
    <td mat-cell *matCellDef="let row">
      <a *ngFor="let ref of row.mathmodelRefs"
         href="/api/v0/mathmodel/{{ref.mmKey}}">
        {{ ref.mmKey }}
      </a>
    </td>
  </ng-container>
  <ng-container matColumnDef="date">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Date</th>
    <td mat-cell *matCellDef="let row"> {{ row.date }}</td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns;"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

</mat-table>
<mat-paginator [pageSizeOptions]="[10, 20]" showFirstLastButtons></mat-paginator>
